webpackJsonp([68237591569990],{424:function(n,s){n.exports={data:{site:{siteMetadata:{title:"EVLE",subtitle:"Knowledge is not consumed, it is shared",copyright:"Â© All rights reserved.",author:{name:"evle",twitter:"#"},disqusShortname:"",url:"https://evle.netlify.com"}},markdownRemark:{id:"/Users/evle/blog/src/pages/articles/2019-07-22---translation-best-practices-for-writing-react-components/index.md absPath of file >>> MarkdownRemark",html:'<p>ä¼—çŸ¥Reactåº”ç”¨æ˜¯ä¸€ç§åŸºäºç»„ä»¶çš„æ¶æ„æ¨¡å¼, å¤æ‚çš„UIå¯ä»¥é€šè¿‡ä¸€äº›å°çš„ç»„ä»¶ç»„åˆèµ·æ¥, ç«™åœ¨è½¯ä»¶å·¥ç¨‹çš„è§’åº¦è¿™æ ·çš„å¼€å‘æ–¹å¼ä¼šæé«˜å¼€å‘æ•ˆç‡, ç¨‹åºçš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>\n<p>ä½†åœ¨å®é™…ç»„ä»¶çš„ç¼–å†™ä¸­æˆ‘ä»¬é€šå¸¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜: å¤æ‚çš„ç»„ä»¶å¾€å¾€å…·æœ‰å¤šç§èŒè´£, å¹¶ä¸”ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§å¾ˆé«˜, æˆ‘ä»¬è¶Šå†™è¶Šå¤æ‚çš„ç»„ä»¶ä¼šäº§ç”ŸæŠ€æœ¯è´Ÿå€º, ææƒ§æ¯ä¸€æ¬¡éœ€æ±‚çš„å˜åŒ–, åœ¨åæœŸç»´æŠ¤ä¸ŠèŠ±è´¹å¾ˆé«˜çš„æ—¶é—´å’Œç²¾åŠ›æˆæœ¬ã€‚</p>\n<p>é‚£ä¹ˆä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬éœ€è¦æ€è€ƒä»¥ä¸‹2ä¸ªé—®é¢˜:</p>\n<ul>\n<li>å¤æ‚ç»„ä»¶å¦‚ä½•æ‹†åˆ†ï¼Ÿ</li>\n<li>ç»„ä»¶ä¹‹é—´å¦‚ä½•é€šä¿¡ä¼šé™ä½ä»–ä»¬çš„è€¦åˆæ€§æˆ–è€…è¯´ä¾èµ–ï¼Ÿ</li>\n</ul>\n<h2>Single responsibility åŸåˆ™</h2>\n<blockquote>\n<p>A component has a single responsibility when it has one reason to change.</p>\n</blockquote>\n<p>Single responsibility principle (SRP) è¦æ±‚ä¸€ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹æƒ…, å•ä¸€ä»»åŠ¡, è‰¯å¥½çš„å¯æµ‹è¯•æ€§, æ˜¯ç¼–å†™å¤æ‚ç»„ä»¶çš„åŸºç¡€ã€‚è¿™æ ·å½“æˆ‘ä»¬éœ€æ±‚å˜åŒ–æ—¶å€™, æˆ‘ä»¬ä¹Ÿåªéœ€è¦ä¿®æ”¹å•ä¸€çš„ç»„ä»¶, ä¸ä¼šå‡ºç°è¿é”ååº”é€ æˆçš„â€å¼€å‘ä¿¡å¿ƒç¼ºå¤±â€ã€‚</p>\n<p>ä¸¾ä¸ªå®é™…çš„ä¾‹å­: è·å–è¿œç¨‹æ•°æ®ç»„ä»¶, å…ˆåˆ†æå‡ºè¯¥ç»„ä»¶ä¸­å¯èƒ½å˜åŒ–çš„ç‚¹</p>\n<ul>\n<li>è¯·æ±‚åœ°å€</li>\n<li>å“åº”çš„æ•°æ®æ ¼å¼</li>\n<li>ä½¿ç”¨ä¸åŒçš„HTTPåº“</li>\n<li>ç­‰ç­‰</li>\n</ul>\n<p>å†ä¸¾ä¸ªä¾‹å­: è¡¨æ ¼ç»„ä»¶, æ‹¿åˆ°è®¾è®¡å›¾çœ‹åˆ°è®¾è®¡å›¾ä¸Šæœ‰4è¡Œ3åˆ—çš„æ•°æ®, ç›´æ¥å†™æ­»4è¡Œ3åˆ—æ˜¯æ²¡æœ‰æ™ºæ…§çš„, æˆ‘ä»¬è¿˜æ˜¯å…ˆè¦è€ƒè™‘å¯èƒ½å˜åŒ–çš„ç‚¹:</p>\n<ul>\n<li>å¢åŠ è¡Œåˆ—æˆ–è€…å‡å°‘è¡Œåˆ—</li>\n<li>ç©ºçš„è¡¨æ ¼å¦‚ä½•æ˜¾ç¤º</li>\n<li>è¯·æ±‚åˆ°çš„è¡¨æ ¼æ•°æ®æ ¼å¼å‘ç”Ÿå˜åŒ–</li>\n</ul>\n<p>æœ‰äº›äººä¼šè§‰å¾—æ˜¯ä¸æ˜¯æƒ³å¤ªå¤š? å¾ˆå¤šæ—¶å€™äººä»¬é€šå¸¸ä¼šå¿½è§†SRP, èµ·åˆçœ‹æ¥ç¡®å®å†™åœ¨ä¸€èµ·ä¹Ÿæ²¡æœ‰ç³Ÿæ›´é‡è¦çš„åŸå› æ˜¯å› ä¸ºå†™çš„å¿«, å› ä¸ºä¸éœ€è¦å»æ€è€ƒç»„ä»¶ç»“æ„å’Œé€šä¿¡ä¹‹ç±»çš„äº‹æƒ…, ä½†æ˜¯åœ¨äº§å“éœ€æ±‚å˜åŒ–é¢‘ç¹çš„ä»Šå¤©, å”¯æœ‰è‰¯å¥½çš„ç»„ä»¶åŒ–è®¾è®¡æ‰èƒ½ä¿éšœäº§å“è¿­ä»£çš„é€Ÿåº¦ä¸è´¨é‡ã€‚ </p>\n<h3>å®è·µ: æ‹†åˆ†ä¸€ä¸ªWeatherç»„ä»¶</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">\'axios\'</span><span class="token punctuation">;</span>\n<span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span><span class="token punctuation">,</span> windSpeed<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n \n   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">const</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n     <span class="token keyword">return</span> <span class="token punctuation">(</span>\n       <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"weather"</span><span class="token operator">></span>\n         <span class="token operator">&lt;</span>div<span class="token operator">></span>Temperature<span class="token punctuation">:</span> <span class="token punctuation">{</span>temperature<span class="token punctuation">}</span>Â°<span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n         <span class="token operator">&lt;</span>div<span class="token operator">></span>Wind<span class="token punctuation">:</span> <span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span>km<span class="token operator">/</span>h<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n       <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n     <span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   \n   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'http://weather.com/api\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token keyword">const</span> <span class="token punctuation">{</span> current <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span> \n       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n         temperature<span class="token punctuation">:</span> current<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span>\n         windSpeed<span class="token punctuation">:</span> current<span class="token punctuation">.</span>windSpeed\n       <span class="token punctuation">}</span><span class="token punctuation">)</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ˜æ˜¾è¿™ä¸ªç»„ä»¶çš„è®¾è®¡è¿åäº†SRP, å…ˆè®©æˆ‘ä»¬åˆ†æä¸€ä¸‹<code class="language-text">Weather</code>ç»„ä»¶ä¸­æœ‰å“ªäº›ä¼šå˜åŒ–çš„ç‚¹:</p>\n<ul>\n<li>ç½‘ç»œè¯·æ±‚éƒ¨åˆ†å¯èƒ½ä¼šå˜, æ¯”å¦‚æœåŠ¡å™¨åœ°å€, å“åº”çš„æ•°æ®æ ¼å¼</li>\n<li>UIå±•ç¤ºçš„é€»è¾‘å¯èƒ½ä¼šå˜, æœ‰å¯èƒ½ä»¥åè¦å¢åŠ å…¶ä»–å¤©æ°”ä¿¡æ¯</li>\n</ul>\n<p>ä¸ºäº†æ‹¥æŠ±ä»¥ä¸Šçš„å˜åŒ–æˆ‘ä»¬å¯ä»¥å°†<code class="language-text">Weather</code>æ‹†åˆ†æˆ2ä¸ªç»„ä»¶: <code class="language-text">WeatherFetch</code>å’Œ<code class="language-text">WeatherInfo</code>, åˆ†åˆ«ç”¨æ¥å¤„ç†ç½‘ç»œè¯·æ±‚å’ŒUIä¿¡æ¯çš„å±•ç¤ºã€‚</p>\n<p>æ‹†åˆ†ä¸ºçš„ç»„ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Weather</span>\n<span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">return</span> <span class="token operator">&lt;</span>WeatherFetch <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// WeatherFetch</span>\n<span class="token keyword">class</span> <span class="token class-name">WeatherFetch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span><span class="token punctuation">,</span> windSpeed<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n \n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         <span class="token keyword">const</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n         <span class="token keyword">return</span> <span class="token punctuation">(</span>\n           <span class="token operator">&lt;</span>WeatherInfo temperature<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span> windSpeed<span class="token operator">=</span><span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n         <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n   \n   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'http://weather.com/api\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token keyword">const</span> <span class="token punctuation">{</span> current <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span> \n       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n         temperature<span class="token punctuation">:</span> current<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span>\n         windSpeed<span class="token punctuation">:</span> current<span class="token punctuation">.</span>windSpeed\n       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// WeatherInfo</span>\n<span class="token keyword">function</span> <span class="token function">WeatherInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">return</span> <span class="token punctuation">(</span>\n     <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"weather"</span><span class="token operator">></span>\n       <span class="token operator">&lt;</span>div<span class="token operator">></span>Temperature<span class="token punctuation">:</span> <span class="token punctuation">{</span>temperature<span class="token punctuation">}</span>Â°<span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n       <span class="token operator">&lt;</span>div<span class="token operator">></span>Wind<span class="token punctuation">:</span> <span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span> km<span class="token operator">/</span>h<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n   <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<h3>HOCçš„åº”ç”¨</h3>\n<blockquote>\n<p>Higher order component is a function that takes one component and returns a new component. </p>\n</blockquote>\n<p>æœ‰äº›æ—¶å€™æ‹†åˆ†ç»„ä»¶ä¹Ÿä¸ä¸€å®šæ˜¯ä¸‡èƒ½çš„, æ¯”å¦‚æƒ³ç»™ä¸€ä¸ªç»„ä»¶ä¸Šé¢å¤–æ·»åŠ ä¸€äº›å‚æ•°ã€‚ è¿™æ—¶æˆ‘ä»¬å¯ä½¿ç”¨é«˜é˜¶ç»„ä»¶(HOC)</p>\n<p>HOCæœ€ç»å…¸çš„ä½¿ç”¨åœºæ™¯æ˜¯ <strong>props proxy</strong> , å³åŒ…è£¹ä¸€ä¸ªç»„, ä¸ºå…¶æ·»åŠ propsæˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„props, å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">withNewFunctionality</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">NewFunctionality</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> newProp <span class="token operator">=</span> <span class="token string">\'Value\'</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> propsProxy <span class="token operator">=</span> <span class="token punctuation">{</span>\n         <span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">,</span>\n         <span class="token comment">// Alter existing prop:</span>\n         ownProp<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>ownProp <span class="token operator">+</span> <span class="token string">\' was modified\'</span><span class="token punctuation">,</span>\n         <span class="token comment">// Add new prop:</span>\n         newProp\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>propsProxy<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> MyNewComponent <span class="token operator">=</span> <span class="token function">withNewFunctionality</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h4>Props proxy</h4>\n<p>å†™ä¸€ä¸ªæœ€åŸºç¡€çš„è¡¨å•, ä¸€ä¸ª<code class="language-text">input</code>, ä¸€ä¸ª<code class="language-text">button</code></p>\n<p><img src="https://user-gold-cdn.xitu.io/2019/11/19/16e830dbcf0813d0?w=632&#x26;h=173&#x26;f=png&#x26;s=6709"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">PersistentForm</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>  \n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> inputValue<span class="token punctuation">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">\'inputValue\'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> inputValue <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"persistent-form"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>inputValue<span class="token punctuation">}</span> \n          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span> \n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>Save to storage<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      inputValue<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">\'inputValue\'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æˆ‘ä»¬ç°åœ¨åº”è¯¥èƒ½æœ¬èƒ½çš„æ„Ÿè§‰å‡ºä¸Šé¢çš„ä»£ç å“ªé‡Œæœ‰é—®é¢˜, è¿™ä¸ªç»„ä»¶åšäº†2ä»¶äº‹æƒ…è¿åäº†SRP: <code class="language-text">input</code>çš„ç‚¹å‡»äº‹ä»¶å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹å­˜å‚¨åˆ°state, <code class="language-text">button</code>çš„ç‚¹å‡»äº‹ä»¶å°†stateå­˜å‚¨åˆ°<code class="language-text">localStorage</code>, ç°åœ¨è®©æˆ‘ä»¬æ‹†åˆ†è¿™ä¸¤ä»¶äº‹æƒ…ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">PersistentForm</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>  \n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> inputValue<span class="token punctuation">:</span> props<span class="token punctuation">.</span>initialValue <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> inputValue <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"persistent-form"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>inputValue<span class="token punctuation">}</span> \n          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span> \n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>Save to storage<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      inputValue<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">saveValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ”¹æˆè¿™æ ·çš„è¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçˆ¶ç»„ä»¶æ¥æä¾›å­˜å‚¨åˆ°localStorageçš„åŠŸèƒ½, è¿™æ—¶å€™HOCå°±æ´¾ä¸Šç”¨åœºäº†, æˆ‘ä»¬é€šè¿‡HOCä¸ºåˆšæ‰çš„ç»„ä»¶æ·»åŠ å­˜å‚¨åˆ°localStorageçš„åŠŸèƒ½ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">withPersistence</span><span class="token punctuation">(</span><span class="token parameter">storageKey<span class="token punctuation">,</span> storage</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">PersistentComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> initialValue<span class="token punctuation">:</span> storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>storageKey<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         <span class="token keyword">return</span> <span class="token punctuation">(</span>\n           <span class="token operator">&lt;</span>WrappedComponent\n             initialValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>initialValue<span class="token punctuation">}</span>\n             saveValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>saveValue<span class="token punctuation">}</span>\n             <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span>\n           <span class="token operator">/</span><span class="token operator">></span>\n         <span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token function">saveValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>storageKey<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æœ€åæŠŠä»–ä»¬å˜ä¸ºä¸€ä¸ªç»„ä»¶, æå®šï¼</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">const LocalStoragePersistentForm \n  = withPersistence(&#39;key&#39;, localStorage)(PersistentForm);\n\nconst instance = &lt;LocalStoragePersistentForm /&gt;;</code></pre>\n      </div>\n<p>é€šè¿‡HOCæ·»åŠ çš„localStoraå­˜å‚¨åŠŸèƒ½å¤ç”¨èµ·æ¥æ— æ¯”çš„æ–¹ä¾¿, æ¯”å¦‚ç°åœ¨æœ‰å¦ä¸€ä¸ªè¡¨å•éœ€è¦ä½¿ç”¨localStorageå­˜å‚¨åŠŸèƒ½, æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä¼ é€’å‚æ•°å³å¯</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> LocalStorageMyOtherForm\n  <span class="token operator">=</span> <span class="token function">withPersistence</span><span class="token punctuation">(</span><span class="token string">\'key\'</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">)</span><span class="token punctuation">(</span>MyOtherForm<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token operator">&lt;</span>LocalStorageMyOtherForm <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h4>Render highjacking</h4>\n<p>é™¤äº† <strong>props proxy</strong> ä¹‹å¤–, HOCè¿˜æœ‰ä¸€ä¸ªç»å…¸åº”ç”¨åœºæ™¯æ˜¯ <strong>render highjacking</strong></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">withModifiedChildren</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">ModifiedChildren</span> <span class="token keyword">extends</span> <span class="token class-name">WrappedComponent</span> <span class="token punctuation">{</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> rootElement <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> newChildren <span class="token operator">=</span> <span class="token punctuation">[</span>\n        <span class="token operator">...</span>rootElement<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> \n        <span class="token comment">// Insert a new child:</span>\n        <span class="token operator">&lt;</span>div<span class="token operator">></span>New child<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> <span class="token function">cloneElement</span><span class="token punctuation">(</span>\n        rootElement<span class="token punctuation">,</span> \n        rootElement<span class="token punctuation">.</span>props<span class="token punctuation">,</span> \n        newChildren\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> MyNewComponent <span class="token operator">=</span> <span class="token function">withModifiedChildren</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å’Œ <strong>props proxy</strong> ä¸åŒçš„æ˜¯, <strong>render highjacking</strong> å¯ä»¥åœ¨ä¸ <strong>å…¥ä¾µ</strong> åŸç»„ä»¶çš„æƒ…å†µä¸‹, ä¿®æ”¹å…¶UIæ¸²æŸ“ã€‚ </p>\n<h2>Encapsulated å°è£…</h2>\n<blockquote>\n<p>An encapsulated component provides props to control its behavior while not exposing its internal structure. </p>\n</blockquote>\n<p>Coupling (è€¦åˆ) æ˜¯è½¯ä»¶å·¥ç¨‹ä¸­ä¸å¾—ä¸è€ƒè™‘çš„é—®é¢˜ä¹‹ä¸€, å¦‚ä½•è§£è€¦æˆ–è€…é™ä½è€¦åˆä¹Ÿæ˜¯è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆé‡åˆ°çš„éš¾é¢˜ã€‚</p>\n<p><img src="https://user-gold-cdn.xitu.io/2019/11/19/16e82f2c4b5b365a?w=900&#x26;h=1080&#x26;f=png&#x26;s=400432"></p>\n<p>ä½è€¦åˆå¦‚ä¸Šå›¾, å½“ä½ éœ€è¦ä¿®æ”¹ç³»ç»Ÿçš„ä¸€ä¸ªéƒ¨åˆ†æ—¶å¯èƒ½åªä¼šå½±å“ä¸€å°éƒ¨åˆ†å…¶ä»–ç³»ç»Ÿ, è€Œä¸‹é¢è¿™ç§é«˜è€¦åˆæ˜¯è®©å¼€å‘äººå‘˜å¯¹è½¯ä»¶è´¨é‡å¤±å»ä¿¡å¿ƒçš„åŸç½ª, æ”¹ä¸€å¤„å¯èƒ½ç¬é—´çˆ†ç‚¸ã€‚</p>\n<p><img src="https://user-gold-cdn.xitu.io/2019/11/19/16e82f4a106e7895?w=900&#x26;h=1080&#x26;f=png&#x26;s=389555"></p>\n<h3>éšè—ä¿¡æ¯</h3>\n<p>ä¸€ä¸ªç»„ä»¶å¯èƒ½è¦æ“ä½œ<code class="language-text">refs</code>, å¯èƒ½æœ‰<code class="language-text">state</code>, å¯èƒ½ä½¿ç”¨äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•, è¿™äº›å…·ä½“çš„å®ç°ç»†èŠ‚å…¶ä»–ç»„ä»¶æ˜¯ä¸åº”è¯¥çŸ¥é“çš„, å³: ç»„ä»¶ä¹‹é—´éœ€è¦éšè—å®ç°ç»†èŠ‚, è¿™ä¹Ÿæ˜¯ç»„ä»¶æ‹†åˆ†çš„æ ‡å‡†ä¹‹ä¸€ã€‚</p>\n<h3>é€šä¿¡</h3>\n<p>ç»„ä»¶æ‹†åˆ†å, åŸæ¥ç›´æ¥è·å–çš„æ•°æ®, ç°åœ¨å°±è¦ä¾é é€šä¿¡æ¥è·å–, è™½ç„¶æ›´åŠ ç¹ç, ä½†æ˜¯åœ¨å¯è¯»æ€§å’Œç»´æŠ¤æ€§ä¸Šå¸¦æ¥çš„å¥½å¤„è¿œè¿œå¤§äºå®ƒçš„å¤æ‚æ€§çš„ã€‚Reactç»„ä»¶ä¹‹é—´é€šä¿¡çš„ä¸»è¦æ‰‹æ®µæ˜¯:props</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä½¿ç”¨propsé€šä¿¡</span>\n<span class="token operator">&lt;</span>Message text<span class="token operator">=</span><span class="token string">"Hello world!"</span> modal<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n\n<span class="token comment">// å½“ç„¶ä¹Ÿå¯ä»¥ä¼ é€’å¤æ‚æ•°æ®</span>\n<span class="token operator">&lt;</span>MoviesList items<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">\'Batman Begins\'</span><span class="token punctuation">,</span> <span class="token string">\'Blade Runner\'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n\n<span class="token comment">// å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’ç»„ä»¶(ReactNode)</span>\n<span class="token keyword">function</span> <span class="token function">If</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> component<span class="token punctuation">:</span> Component<span class="token punctuation">,</span> condition <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> condition <span class="token operator">?</span> <span class="token operator">&lt;</span>Component <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token operator">&lt;</span>If condition<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>LazyComponent<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  </code></pre>\n      </div>\n<h2>Composable ç»„åˆ</h2>\n<blockquote>\n<p>A composable component is created from the composition of smaller specialized components. </p>\n</blockquote>\n<p>Mediumä¸Šæœ‰ä¸€ç¯‡æ–‡ç« å«åš ç»„åˆæ˜¯Reactçš„å¿ƒè„ (Composition is the heart of React), å› ä¸ºå®ƒå‘æŒ¥äº†ä»¥ä¸‹3ä¸ªä¼˜ç‚¹:</p>\n<ul>\n<li>å•ä¸€è´£ä»»</li>\n<li>å¤ç”¨æ€§</li>\n<li>çµæ´»æ€§</li>\n</ul>\n<p>æ¥ä¸‹æ¥ä¸¾ğŸŒ°è¯´æ˜</p>\n<h3>å•ä¸€è´£ä»»</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>Application<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Sidebar<span class="token operator">></span>\n      <span class="token operator">&lt;</span>Menu <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Sidebar<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Content<span class="token operator">></span>\n      <span class="token operator">&lt;</span>Article <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Content<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Footer <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>Application<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p><code class="language-text">app</code>è¿™ä¸ªç»„ä»¶ä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½åªè´Ÿè´£å®ƒè¯¥è´Ÿè´£çš„éƒ¨åˆ†, æ¯”å¦‚<code class="language-text">Application</code>åªæ˜¯ä¸€ä¸ªåº”ç”¨çš„å®¹å™¨, <code class="language-text">&lt;Footer /&gt;</code>è´Ÿè´£æ¸²æŸ“é¡µé¢åº•éƒ¨çš„ä¿¡æ¯, é¡µé¢ç»“æ„ä¸€ç›®äº†ç„¶ã€‚</p>\n<h3>å¤ç”¨æ€§</h3>\n<p>æå–å‡ºä¸åŒç»„ä»¶ä¸­çš„ç›¸åŒä»£ç æ˜¯æå‡ç»´æŠ¤æ€§çš„æœ€ä½³å®è·µ, æ¯”å¦‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> instance1 <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>Composed1<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Piece1 <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Common <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>Composed1<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> instance2 <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>Composed2<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Common <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Piece2 <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>Composed2<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h3>çµæ´»æ€§</h3>\n<p>ç»„åˆçš„ç‰¹æ€§å¯ä»¥è®©ç¼–å†™Reactä»£ç æ—¶å€™éå¸¸çµæ´», å½“ç»„ä»¶ç»„åˆæ—¶éœ€è¦é€šè¿‡propsè¿›è¡Œé€šä¿¡, æ¯”å¦‚ çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡<code class="language-text">children</code> prop æ¥æ¥æ”¶å­ç»„ä»¶ã€‚</p>\n<p>å½“æˆ‘ä»¬æƒ³ä¸ºç§»åŠ¨å’ŒPCå±•ç¤ºä¸åŒçš„UIæ—¶æˆ‘ä»¬é€šå¸¸ä¼šå†™æˆä»¥ä¸‹è¿™æ ·:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token punctuation">{</span>Utils<span class="token punctuation">.</span><span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Mobile detected<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Not a mobile device<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span> \n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>At first glance, it harmeless, ä½†æ˜¯å®ƒæ˜æ˜¾å°†åˆ¤æ–­æ˜¯å¦æ—¶ç§»åŠ¨ç«¯çš„é€»è¾‘ä¸ç»„ä»¶è€¦åˆäº†ã€‚è¿™ä¸æ˜¯åœ¨æ‹¼ç§¯æœ¨, è¿™æ˜¯åœ¨â€å…¥ä¾µâ€ç§¯æœ¨ï¼</p>\n<p>è®©æˆ‘ä»¬æ‹†åˆ†åˆ¤æ–­é€»è¾‘ä¸UIè¯•å›¾, å¹¶ä¸”çœ‹çœ‹Reactå¦‚ä½•ä½¿ç”¨ <strong>children prop</strong> çµæ´»çš„è¿›è¡Œæ•°æ®é€šä¿¡ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ByDevice</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children<span class="token punctuation">:</span> <span class="token punctuation">{</span> mobile<span class="token punctuation">,</span> other <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> Utils<span class="token punctuation">.</span><span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> mobile <span class="token punctuation">:</span> other<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token operator">&lt;</span>ByDevice<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n  mobile<span class="token punctuation">:</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Mobile detected<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span>\n  other<span class="token punctuation">:</span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>Not a mobile device<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ByDevice<span class="token operator">></span></code></pre>\n      </div>\n<h2>Reusable å¤ç”¨</h2>\n<blockquote>\n<p>A reusable component is written once but used multiple times.</p>\n</blockquote>\n<p>è½¯ä»¶ä¸–ç•Œç»å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯ reinventing the wheel (é€ è½®å­), æ¯”å¦‚åœ¨é¡¹ç›®ä¸­ç¼–å†™äº†å·²ç»å­˜åœ¨çš„å·¥å…·æˆ–è€…åº“, Reactç»„ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„, æˆ‘ä»¬è¦è€ƒè™‘ä»£ç çš„å¤ç”¨æ€§, å°½å¯èƒ½çš„é™ä½é‡å¤çš„ä»£ç å’Œé€ è½®å­çš„äº‹æƒ…å‘ç”Ÿ, æ˜¯æˆ‘ä»¬ä»£ç â€å†™ä¸€æ¬¡, å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ¬¡â€ã€‚ </p>\n<blockquote>\n<p>Reuse of a component actually means the reuse of its responsibility implementation. </p>\n</blockquote>\n<p>åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°å¾ˆå¤šé«˜è´¨é‡çš„Reactç»„ä»¶, é¿å…æˆ‘ä»¬é€ è½®å­: <a href="https://github.com/brillout/awesome-react-components">Absolutely Awesome React Components &#x26; Libraries</a></p>\n<p>é€šè¿‡é˜…è¯»ä¸Šé¢è¿™äº›å¯å¤ç”¨çš„é«˜è´¨é‡Reactç»„ä»¶çš„æºç æˆ‘ä»¬ä¼šæ”¶è·åˆ°æ›´å¤šå¤ç”¨çš„æ€æƒ³ä»¥åŠä¸€äº›APIçš„ä½¿ç”¨æŠ€å·§æ¯”å¦‚ï¼š<code class="language-text">React.cloneElement</code>ç­‰ç­‰ã€‚</p>\n<h2>Pure Component</h2>\n<p>Pure Componentæ˜¯ä»å‡½æ•°å¼ç¼–ç¨‹å»¶ä¼¸å‡ºæ¥çš„æ¦‚å¿µ, pure function always returns the same output for given the same input. æ¯”å¦‚</p>\n<p>const sum= (a, b) => a + b // sum(1, 1) // => 2</p>\n<p>ç»™ç›¸åŒçš„å‚æ•°æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœ, å½“ä¸€ä¸ªå‡½æ•°å†…éƒ¨ä½¿ç”¨å…¨å±€å˜é‡çš„è¯é‚£ä¹ˆé‚£ä¸ªå‡½æ•°å¯èƒ½ä¼šå˜å¾—ä¸é‚£ä¹ˆâ€çº¯â€(impure)ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> said <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">sayOnce</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>said<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  said <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> message<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">sayOnce</span><span class="token punctuation">(</span><span class="token string">\'Hello World!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => \'Hello World!\'</span>\n<span class="token function">sayOnce</span><span class="token punctuation">(</span><span class="token string">\'Hello World!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => null</span></code></pre>\n      </div>\n<p>impureå‡½æ•°å°±æ˜¯ç»™å®šç›¸åŒçš„å‚æ•°ç¡®æœ‰å¯èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœ, é‚£ä¹ˆç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†, pure componentç»„ä»¶ä¼šè®©æˆ‘ä»¬å¯¹è‡ªå·±çš„ç»„ä»¶è´¨é‡å……æ»¡ä¿¡å¿ƒ, ä½†æ˜¯ä¸å¯èƒ½æ‰€æœ‰çš„ç»„ä»¶æˆ‘ä»¬éƒ½å¯ä»¥å†™æˆ pure component. æ¯”å¦‚æˆ‘ä»¬çš„ç»„ä»¶é‡Œé¢æœ‰ä¸€ä¸ª<code class="language-text">&lt;Input /&gt;</code>, é‚£ä¹ˆæˆ‘ä»¬çš„ç»„ä»¶ä¸æ¥å—ä»»ä½•å‚æ•°, ä½†æ˜¯æ¯æ¬¡éƒ½å¯èƒ½äº§ç”Ÿä¸ä¸€æ ·çš„ç»“æœã€‚ </p>\n<p>çœŸå®ä¸–ç•Œä¸­å¤ªå¤šimpureçš„äº‹æƒ…, æ¯”å¦‚å…¨å±€çŠ¶æ€, å¯æ”¹å˜çš„å…¨å±€çŠ¶æ€å®³äººä¸æµ…, æ•°æ®è¢«æ„å¤–æ”¹å˜å¯¼è‡´æ„å¤–çš„è¡Œä¸º, å¦‚æœå®åœ¨è¦ä½¿ç”¨å…¨å±€çŠ¶æ€, é‚£ä¹ˆè€ƒè™‘ä½¿ç”¨Reduxå§ã€‚é™¤äº†å…¨å±€çŠ¶æ€å¯¼è‡´impureçš„ä¸œè¥¿è¿˜æœ‰å¾ˆå¤šæ¯”å¦‚ç½‘ç»œè¯·æ±‚, local storageç­‰ç­‰, é‚£å¦‚ä½•è®©æˆ‘ä»¬çš„ç»„ä»¶å°½å¯èƒ½çš„å˜æˆpure componentå‘¢ï¼Ÿ </p>\n<p>ç­”æ¡ˆï¼š purification</p>\n<p><img src="https://user-gold-cdn.xitu.io/2019/11/19/16e82571acc2b40a?w=900&#x26;h=1037&#x26;f=png&#x26;s=413614"></p>\n<p>ä¸‹é¢è®©æˆ‘ä»¬å®è·µä¸€ä¸‹å¦‚ä½•å°†impureä¸­pureçš„éƒ¨åˆ†è¿‡æ»¤å‡ºæ¥, æˆä¸ºä¸€ä¸ªalmost pureç»„ä»¶, ç”¨å‰é¢è·å–å¤©æ°”çš„é‚£ä¸ªä¾‹å­, æˆ‘ä»¬æŠŠç½‘ç»œè¯·æ±‚è¿™ç§impureçš„ä¸œè¥¿ä½¿ç”¨<code class="language-text">redux-saga</code>è¿‡æ»¤å‡ºæ¥</p>\n<p>è¿™æ˜¯ä¹‹å‰çš„ä»£ç :</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">WeatherFetch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>  \n   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span><span class="token punctuation">,</span> windSpeed<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">const</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n     <span class="token keyword">return</span> <span class="token punctuation">(</span>\n       <span class="token operator">&lt;</span>WeatherInfo temperature<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span> windSpeed<span class="token operator">=</span><span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n     <span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'http://weather.com/api\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token keyword">const</span> <span class="token punctuation">{</span> current <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span> \n       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n         temperature<span class="token punctuation">:</span> current<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span>\n         windSpeed<span class="token punctuation">:</span> current<span class="token punctuation">.</span>windSpeed\n       <span class="token punctuation">}</span><span class="token punctuation">)</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>æ”¹é€ å</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å®šä¹‰action</span>\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    type<span class="token punctuation">:</span> <span class="token string">\'FETCH\'</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// å®šä¹‰dispatch handler</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> takeEvery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'redux-saga/effects\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token string">\'FETCH\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span>get<span class="token punctuation">,</span> <span class="token string">\'http://weather.com/api\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>current<span class="token punctuation">;</span>\n    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'FETCH_SUCCESS\'</span><span class="token punctuation">,</span>\n      temperature<span class="token punctuation">,</span>\n      windSpeed\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// å®šä¹‰reducer </span>\n<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span><span class="token punctuation">,</span> windSpeed<span class="token punctuation">:</span> <span class="token string">\'N/A\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">case</span> <span class="token string">\'FETCH_SUCCESS\'</span><span class="token punctuation">:</span> \n      <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token operator">...</span>state<span class="token punctuation">,</span>\n        temperature<span class="token punctuation">:</span> action<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span>\n        windSpeed<span class="token punctuation">:</span> action<span class="token punctuation">.</span>windSpeed\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// ä½¿ç”¨reduxè¿æ¥èµ·æ¥</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-redux\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> fetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./action\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WeatherFetch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">const</span> <span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n     <span class="token keyword">return</span> <span class="token punctuation">(</span>\n       <span class="token operator">&lt;</span>WeatherInfo temperature<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span> windSpeed<span class="token operator">=</span><span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n     <span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    temperature<span class="token punctuation">:</span> state<span class="token punctuation">.</span>temperate<span class="token punctuation">,</span>\n    windSpeed<span class="token punctuation">:</span> state<span class="token punctuation">.</span>windSpeed\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> <span class="token punctuation">{</span> fetch <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å°†impureçš„ç»„ä»¶æ”¹æˆalmost pureçš„ç»„ä»¶å¯ä»¥è®©æˆ‘ä»¬æ›´äº†è§£ç¨‹åºçš„è¡Œä¸º, ä¹Ÿå°†å˜å¾—æ›´æ˜“äºæµ‹è¯•</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">\'assert\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow<span class="token punctuation">,</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'enzyme\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> spy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'sinon\'</span><span class="token punctuation">;</span>\n<span class="token comment">// Import the almost-pure version WeatherFetch</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> WeatherFetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./WeatherFetch\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> WeatherInfo <span class="token keyword">from</span> <span class="token string">\'./WeatherInfo\'</span><span class="token punctuation">;</span>\n\n<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">\'&lt;WeatherFetch />\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'should render the weather info\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">function</span> <span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>WeatherFetch temperature<span class="token operator">=</span><span class="token string">"30"</span> windSpeed<span class="token operator">=</span><span class="token string">"10"</span> fetch<span class="token operator">=</span><span class="token punctuation">{</span>noop<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>WeatherInfo temperature<span class="token operator">=</span><span class="token string">"30"</span> windSpeed<span class="token operator">=</span><span class="token string">"10"</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'should fetch weather when mounted\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> fetchSpy <span class="token operator">=</span> <span class="token function">spy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>\n     <span class="token operator">&lt;</span>WeatherFetch temperature<span class="token operator">=</span><span class="token string">"30"</span> windSpeed<span class="token operator">=</span><span class="token string">"10"</span> fetch<span class="token operator">=</span><span class="token punctuation">{</span>fetchSpy<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>fetchSpy<span class="token punctuation">.</span>calledOnce<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>å…¶å®ä¸Šé¢çš„almost pureç»„ä»¶ä»ç„¶æœ‰ä¼˜åŒ–çš„ç©ºé—´, æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·åº“è®©å®ƒæˆä¸ºpure component</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-redux\'</span><span class="token punctuation">;</span>  \n<span class="token keyword">import</span> <span class="token punctuation">{</span> compose<span class="token punctuation">,</span> lifecycle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'recompose\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> fetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./action\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">WeatherFetch</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> temperature<span class="token punctuation">,</span> windSpeed <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  \n   <span class="token keyword">return</span> <span class="token punctuation">(</span>\n     <span class="token operator">&lt;</span>WeatherInfo temperature<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span> windSpeed<span class="token operator">=</span><span class="token punctuation">{</span>windSpeed<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n   <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  \n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    temperature<span class="token punctuation">:</span> state<span class="token punctuation">.</span>temperate<span class="token punctuation">,</span>\n    windSpeed<span class="token punctuation">:</span> state<span class="token punctuation">.</span>windSpeed\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">compose</span><span class="token punctuation">(</span>\n  <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> <span class="token punctuation">{</span> fetch <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function">lifecycle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">(</span>WeatherFetch<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<h2>å¯æµ‹è¯•æ€§</h2>\n<blockquote>\n<p>A tested component is verified whether it renders the expected output for a given input.\nA testable component is easy to test.</p>\n</blockquote>\n<p>å¦‚ä½•ç¡®ä¿ç»„ä»¶æŒ‰ç…§æˆ‘ä»¬çš„æœŸæœ›å·¥ä½œ, é€šå¸¸æˆ‘ä»¬ä¼šæ”¹ä¸‹æ•°æ®æˆ–è€…æ¡ä»¶ä¹‹ç±»çš„ç„¶ååœ¨æµè§ˆå™¨ä¸­çœ‹ç»“æœ, ç§°ä¹‹ä¸ºæ‰‹åŠ¨éªŒè¯ã€‚ è¿™æ ·æ‰‹åŠ¨éªŒè¯æœ‰ä¸€äº›ç¼ºç‚¹:</p>\n<ol>\n<li>ä¸´æ—¶ä¿®æ”¹ä»£ç ä¸ºäº†éªŒè¯å®¹æ˜“å‡ºé”™</li>\n<li>æ¯æ¬¡ä¿®æ”¹ä»£ç  æ¯æ¬¡éªŒè¯å¾ˆä½æ•ˆ</li>\n</ol>\n<p>å› æ­¤, æˆ‘ä»¬éœ€è¦éœ€è¦ç¼–å†™ä¸€äº›unit testsæ¥å¸®åŠ©æˆ‘ä»¬æµ‹è¯•ç»„ä»¶, ä½†æ˜¯ç¼–å†™unit testsçš„å‰ææ˜¯, æˆ‘ä»¬çš„ç»„ä»¶æ˜¯å¯æµ‹è¯•çš„, ä¸€ä¸ªä¸å¯æµ‹è¯•çš„ç»„ä»¶ç»å¯¹æ˜¯è®¾è®¡ä¸è‰¯çš„ã€‚</p>\n<blockquote>\n<p>A component that is untestable or hard to test is most likely badly designed. </p>\n</blockquote>\n<p>ç»„ä»¶å˜å¾—éš¾ä»¥æµ‹è¯•æœ‰å¾ˆå¤šå› ç´ , æ¯”å¦‚å¤ªå¤šçš„props, é«˜åº¦è€¦åˆ, å…¨å±€å˜é‡ç­‰ç­‰, ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­è®©æˆ‘ä»¬ç†è§£å¦‚ä½•ç¼–å†™å¯æµ‹è¯•ç»„ä»¶ã€‚</p>\n<p>ç¼–å†™ä¸€ä¸ª<code class="language-text">Controls</code>ç»„ä»¶, ç›®çš„æ˜¯å®ç°ä¸€ä¸ªè®¡æ•°å™¨, ç‚¹å‡»<code class="language-text">Increase</code>åˆ™åŠ 1, ç‚¹å‡»<code class="language-text">Decrease</code>åˆ™å‡1, å…ˆæ¥ä¸€ä¸ªé”™è¯¯çš„è®¾è®¡</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Control parent<span class="token operator">=</span><span class="token punctuation">{</span>ConponentName<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>å‡è®¾æˆ‘ä»¬æ˜¯è¿™æ ·ä½¿ç”¨çš„, æ„å›¾æ˜¯æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªçˆ¶ç»„ä»¶, ç‚¹å‡»<code class="language-text">Control</code>çš„åŠ å‡æ“ä½œä¼šä¿®æ”¹çˆ¶ç»„ä»¶çš„stateå€¼</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">\'assert\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'enzyme\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Controls</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"controls"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n          Increase\n        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span> \n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n          Decrease\n        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token parameter">toAdd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n      number<span class="token punctuation">:</span> prevState<span class="token punctuation">.</span>number <span class="token operator">+</span> toAdd       \n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Temp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> number<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">\'&lt;Controls />\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'should update parent state\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Temp<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Controls parent<span class="token operator">=</span><span class="token punctuation">{</span>parent<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">\'number\'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">\'button\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">\'number\'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">\'button\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">\'number\'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> \n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>ç”±äºæˆ‘ä»¬è®¾è®¡çš„<code class="language-text">Controls</code>ç»„ä»¶ä¸çˆ¶ç»„ä»¶ä¾èµ–å¾ˆå¼º, å¯¼è‡´æˆ‘ä»¬ç¼–å†™å•å…ƒæµ‹è¯•å¾ˆå¤æ‚, è¿™æ—¶æˆ‘ä»¬å°±åº”è¯¥æ€è€ƒé‡æ„è¿™ä¸ª<code class="language-text">Controls</code>æé«˜å®ƒçš„å¯æµ‹è¯•æ€§äº†ã€‚</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">\'assert\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'enzyme\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> spy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'sinon\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">Controls</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onIncrease<span class="token punctuation">,</span> onDecrease <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"controls"</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onIncrease<span class="token punctuation">}</span><span class="token operator">></span>Increase<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span> \n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onDecrease<span class="token punctuation">}</span><span class="token operator">></span>Decrease<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">\'&lt;Controls />\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'should execute callback on buttons click\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> increase <span class="token operator">=</span> sinon<span class="token punctuation">.</span><span class="token function">spy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> descrease <span class="token operator">=</span> sinon<span class="token punctuation">.</span><span class="token function">spy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>Controls onIncrease<span class="token operator">=</span><span class="token punctuation">{</span>increase<span class="token punctuation">}</span> onDecrease<span class="token operator">=</span><span class="token punctuation">{</span>descrease<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">\'button\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>increase<span class="token punctuation">.</span>calledOnce<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">\'button\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">\'click\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert</span><span class="token punctuation">(</span>descrease<span class="token punctuation">.</span>calledOnce<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>é‡æ„åæˆ‘ä»¬çš„ç»„ä»¶ä½¿ç”¨æ–¹æ³•å˜ä¸º <code class="language-text">&lt;Controls onIncrease={increase} onDecrease={descrease} /&gt;</code>, è¿™æ ·çš„ä½¿ç”¨æ–¹å¼å½»åº•è§£è€¦äº†<code class="language-text">Controls</code>å’Œçˆ¶ç»„ä»¶ä¹‹é—´çš„å…³ç³», å³: <code class="language-text">Controls</code>åªè´Ÿè´£æŒ‰é’®UIçš„æ¸²æŸ“ã€‚</p>\n<h2>å¯è¯»æ€§</h2>\n<blockquote>\n<p>A meaningful component is easy to understand what it does. </p>\n</blockquote>\n<p>ä»£ç çš„å¯è¯»æ€§å¯¹äºäº§å“è¿­ä»£çš„é‡è¦æ€§æ˜¯ä¸å¯å¿½è§†çš„, obscured codeä¸ä»…ä¼šè®©ç»´æŠ¤è€…å¤´ç–¼, ç”šè‡³æˆ‘ä»¬è‡ªå·±ä¹Ÿæ— æ³•ç†è§£ä»£ç çš„æ„å›¾ã€‚æ›¾ç»æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç»Ÿè®¡, ç¼–ç¨‹å·¥ä½œæ˜¯ç”±: 75%çš„è¯»ä»£ç (ç†è§£) + 20%çš„ä¿®æ”¹ç°æœ‰ä»£ç  + 5%æ–°ä»£ç ç»„æˆçš„ã€‚</p>\n<p>self-explanatory codeæ— ç–‘æ˜¯æé«˜ä»£ç å¯è¯»æ€§æœ€ç›´æ¥æœ€å¥½çš„æ–¹æ³•</p>\n<p>ä¸¾ä¸€ä¸ªä¾‹å­:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// &lt;Games> renders a list of games</span>\n<span class="token comment">// "data" prop contains a list of game data</span>\n<span class="token keyword">function</span> <span class="token function">Games</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// display up to 10 first games</span>\n  <span class="token keyword">const</span> data1 <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// Map data1 to &lt;Game> component</span>\n  <span class="token comment">// "list" has an array of &lt;Game> components</span>\n  <span class="token keyword">const</span> list <span class="token operator">=</span> data1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// "v" has game data</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Game key<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>id<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token operator">&lt;</span>Games \n   data<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'Mario\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'Doom\'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> \n<span class="token operator">/</span><span class="token operator">></span></code></pre>\n      </div>\n<p>ä¸‹é¢è®©æˆ‘ä»¬é‡æ„è¿™æ®µä»£ç , ä½¿å®ƒå¯ä»¥ <strong>self-explanatory</strong> å’Œ <strong>self-documenting</strong> .</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">GAMES_LIMIT</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">GamesList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> itemsSlice <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">GAMES_LIMIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> games <span class="token operator">=</span> itemsSlice<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">gameItem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Game key<span class="token operator">=</span><span class="token punctuation">{</span>gameItem<span class="token punctuation">.</span>id<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>gameItem<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>games<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token operator">&lt;</span>GamesList \n  items<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'Mario\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'Doom\'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>\n<span class="token operator">/</span><span class="token operator">></span></code></pre>\n      </div>\n<p>ä¸€ä¸ªå¯è¯»æ€§è‰¯å¥½çš„Reactç»„ä»¶åº”è¯¥åšåˆ°: é€šè¿‡è¯»<code class="language-text">name</code>å’Œ<code class="language-text">props</code>å°±å¯ä»¥çœ‹å‡ºè¿™æ®µä»£ç çš„æ„å›¾ã€‚ </p>\n<h2>å†™åœ¨æœ€åçš„</h2>\n<p>å³ä½¿ç¼–å†™å‡ºäº†è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½çš„ç»„ä»¶, æˆ‘ä»¬ä¹Ÿè¯¥åœ¨ä¸€æ¬¡ä¸€æ¬¡è¿­ä»£ä¸­å» Do continuous improvement, æ­£å¦‚ä½œå®¶William Zinsseè¯´è¿‡ä¸€å¥è¯</p>\n<blockquote>\n<p>rewriting is the essence of writing. I pointed out that professional writers rewrite their sentences over and over and then rewrite what they have rewritten. </p>\n</blockquote>\n<p>é‡æ„, ç¼–å†™é«˜è´¨é‡, å¯æ‰©å±•, å¯ç»´æŠ¤çš„åº”ç”¨æ˜¯æ¯ä¸ªå¼€å‘äººå‘˜çš„è¿½æ±‚ã€‚</p>\n<p>æœ¬æ–‡å‚è€ƒ: <a href="https://dmitripavlutin.com/7-architectural-attributes-of-a-reliable-react-component/#8-do-continuous-improvement">7 Architectural Attributes of a Reliable React Component</a></p>',
fields:{tagSlugs:["/tags//"]},frontmatter:{title:"ç¼–å†™Reactç»„ä»¶çš„æœ€ä½³å®è·µ(ç¿»è¯‘)",tags:[null],date:"2019-07-22",description:""},excerpt:"ä¼—çŸ¥Reactåº”ç”¨æ˜¯ä¸€ç§åŸºäºç»„ä»¶çš„æ¶æ„æ¨¡å¼, å¤æ‚çš„UIâ€¦"}},pathContext:{slug:"/posts/translation-best-practices-for-writing-react-components"}}}});
//# sourceMappingURL=path---posts-translation-best-practices-for-writing-react-components-e691192774b233b970d3.js.map